# ðŸš€ Advancia PayLedger - Production Deployment Guide

**Version:** 2.0.0  
**Date:** January 27, 2026  
**Status:** Ready for Deployment

---


## ðŸ“‹ Deployment Overview

This guide covers deploying **Advancia PayLedger** to production:


- **Frontend:** Vercel (Next.js hosting)
- **Backend:** DigitalOcean (Node.js server)
- **Database:** PostgreSQL (via Neon or DigitalOcean)
- **Email:** Cloudflare Email Routing
- **DNS:** Custom domain configuration

---


## ðŸŽ¯ Prerequisites


Before deployment, ensure you have:


### Required Accounts

- [ ] GitHub account (repository access)
- [ ] Vercel account (frontend deployment)
- [ ] DigitalOcean account (backend hosting)
- [ ] Neon account (PostgreSQL database) or DO managed DB
- [ ] Cloudflare account (DNS, email routing)
- [ ] Stripe account (payment processing)


### Required Information

- [ ] Custom domain name (e.g., advanciapayledger.com)
- [ ] Database credentials
- [ ] API keys (Stripe, Cloudflare, etc.)
- [ ] Email credentials
- [ ] SSL certificate (auto-generated by Vercel/DO)


### Environment Variables

```env
# Backend (DigitalOcean)
NODE_ENV=production
PORT=3001
DATABASE_URL=postgresql://user:pass@host:5432/advancia
JWT_SECRET=your-secret-key-32-chars-minimum
SESSION_SECRET=your-session-secret
API_KEY=your-api-key
STRIPE_SECRET_KEY=sk_live_...
STRIPE_PUBLISHABLE_KEY=pk_live_...
FRONTEND_URL=https://advanciapayledger.com
BACKEND_URL=https://api.advanciapayledger.com

# Frontend (Vercel)
NEXT_PUBLIC_API_URL=https://api.advanciapayledger.com
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_...
NEXT_PUBLIC_APP_NAME=Advancia PayLedger
```

---


## ðŸ“¦ Part 1: Deploy Frontend to Vercel


### Step 1: Connect GitHub Repository

```bash
# 1. Push code to GitHub
cd frontend-clean
git remote add origin https://github.com/yourusername/advanciapayledger-frontend.git
git branch -M main
git push -u origin main
```


### Step 2: Connect Vercel


1. Go to `https://vercel.com`
2. Click "New Project"
3. Import GitHub repository
4. Select `frontend-clean` directory
5. Configure build settings:
   - Framework: Next.js
   - Build Command: `npm run build`
   - Output Directory: `.next`
   - Install Command: `npm install`


### Step 3: Environment Variables

In Vercel Dashboard:

1. Go to Project Settings â†’ Environment Variables
2. Add production variables:


```env
NEXT_PUBLIC_API_URL=https://api.advanciapayledger.com
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_YOUR_KEY
NEXT_PUBLIC_APP_NAME=Advancia PayLedger
NEXT_PUBLIC_APP_VERSION=2.0.0
```


### Step 4: Deploy


```bash
# Option 1: Automatic (recommended)
# Push to main branch - Vercel auto-deploys

# Option 2: Manual
cd frontend-clean
npm install -g vercel
vercel --prod
```


**Expected Output:**

```text
âœ… Deployed to: https://advanciapayledger.vercel.app
âœ… Production URL: https://yourdomain.vercel.app
```


**Verification:**

- [ ] Frontend accessible at Vercel URL
- [ ] All pages loading
- [ ] No console errors
- [ ] Environment variables set correctly

---

## ðŸ–¥ï¸ Part 2: Deploy Backend to DigitalOcean

### Step 1: Create DigitalOcean Droplet

```bash
# Create Ubuntu 22.04 LTS Droplet
# Size: $6/month (2GB RAM, 1 vCPU)
# Region: New York (us-east-1)
```


1. Go to `https://cloud.digitalocean.com`
2. Click "Create" â†’ "Droplets"
3. Select Ubuntu 22.04 LTS
4. Choose basic plan ($6/month minimum)
5. Select New York region
6. Add SSH key for authentication
7. Click "Create Droplet"


**Note:** Save the Droplet IP address


### Step 2: Configure Droplet


```bash
# SSH into droplet
ssh root@YOUR_DROPLET_IP

# Update system
apt update && apt upgrade -y

# Install Node.js 20.x
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs

# Install PostgreSQL
sudo apt install -y postgresql postgresql-contrib

# Install Nginx (reverse proxy)
sudo apt install -y nginx

# Install Certbot (SSL certificates)
sudo apt install -y certbot python3-certbot-nginx
```


### Step 3: Configure PostgreSQL


```bash
# Login to PostgreSQL
sudo -u postgres psql

# Create database
CREATE DATABASE advancia_payledger;

# Create user
CREATE USER advancia_user WITH PASSWORD 'strong_password_here';

# Grant permissions
ALTER ROLE advancia_user SET client_encoding TO 'utf8';
ALTER ROLE advancia_user SET default_transaction_isolation TO 'read committed';
ALTER ROLE advancia_user SET default_transaction_deferrable TO on;
ALTER ROLE advancia_user SET default_transaction_read_only TO off;
ALTER ROLE advancia_user SET timezone TO 'UTC';

# Grant privileges
GRANT ALL PRIVILEGES ON DATABASE advancia_payledger TO advancia_user;

# Exit PostgreSQL
\q
```


### Step 4: Deploy Application


```bash
# Clone repository
cd /var/www
git clone https://github.com/yourusername/advanciapayledger-backend.git
cd advanciapayledger-backend

# Install dependencies
npm install

# Build TypeScript
npm run build

# Create .env file
cat > .env << EOF
NODE_ENV=production
PORT=3001
DATABASE_URL=postgresql://advancia_user:password@localhost:5432/advancia_payledger
JWT_SECRET=$(openssl rand -hex 32)
SESSION_SECRET=$(openssl rand -hex 32)
STRIPE_SECRET_KEY=sk_live_YOUR_KEY
STRIPE_PUBLISHABLE_KEY=pk_live_YOUR_KEY
FRONTEND_URL=https://advanciapayledger.com
EOF

# Set permissions
chown -R nobody:nogroup /var/www/advanciapayledger-backend
chmod -R 755 /var/www/advanciapayledger-backend

# Run database migrations
npm run prisma:migrate
```


### Step 5: Configure Nginx Reverse Proxy


```bash
# Create Nginx config
sudo cat > /etc/nginx/sites-available/advanciapayledger << EOF
server {
    listen 80;
    server_name api.advanciapayledger.com;

    location / {
        proxy_pass http://localhost:3001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade \$http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host \$host;
        proxy_cache_bypass \$http_upgrade;
        
        # CORS headers
        add_header 'Access-Control-Allow-Origin' '*' always;
        add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS' always;
        add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization' always;
    }
}
EOF

# Enable site
sudo ln -s /etc/nginx/sites-available/advanciapayledger /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```


### Step 6: Set Up SSL Certificate


```bash
# Install SSL certificate with Let's Encrypt
sudo certbot certonly --nginx -d api.advanciapayledger.com

# Update Nginx config to use SSL
sudo certbot --nginx -d api.advanciapayledger.com

# Verify SSL
sudo nginx -t
sudo systemctl restart nginx
```


### Step 7: Set Up Process Manager (PM2)


```bash
# Install PM2 globally
npm install -g pm2

# Start application
cd /var/www/advanciapayledger-backend
pm2 start dist/index.js --name "advancia-api"

# Setup startup hook
pm2 startup
pm2 save

# Verify running
pm2 list
```


**Expected Output:**

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚ App Name        â”‚ id â”‚ version  â”‚ mode â”‚ pid   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ advancia-api    â”‚ 0  â”‚ 2.0.0    â”‚ fork â”‚ 1234  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
```

### Step 8: Verify Backend Deployment

```bash
# Test health endpoint
curl https://api.advanciapayledger.com/api/health

# Expected response:
# {"status":"healthy","timestamp":"2026-01-27T..."}
```


**Verification Checklist:**

- [ ] Backend accessible at API domain
- [ ] Health checks passing
- [ ] Database connected
- [ ] Environment variables loaded
- [ ] SSL certificate valid
- [ ] Logs showing activity

---


## ðŸŒ Part 3: Configure DNS and Domain


### Step 1: Update DNS Records


In your domain registrar (Namecheap, GoDaddy, etc.):

Add A records:


```text
Record Type: A
Name: @
Value: YOUR_VERCEL_IP
TTL: 3600

Record Type: A
Name: api
Value: YOUR_DIGITALOCEAN_IP
TTL: 3600
```

Or use CNAME if provided by hosting:


```text
Record Type: CNAME
Name: www
Value: advanciapayledger.vercel.app
TTL: 3600
```


### Step 2: Point Vercel Domain


1. Go to Vercel Dashboard
2. Select project
3. Go to Settings â†’ Domains
4. Add custom domain: `advanciapayledger.com`
5. Follow DNS configuration steps
6. Verify domain ownership


### Step 3: Test Domain


```bash
# Test frontend domain
curl https://advanciapayledger.com

# Test API domain
curl https://api.advanciapayledger.com/api/health

# Both should return 200 OK
```


**Verification:**

- [ ] Frontend accessible at main domain
- [ ] API accessible at api subdomain
- [ ] SSL certificates valid
- [ ] HTTPS redirects working
- [ ] No security warnings

---


## ðŸ” Part 4: Security Configuration


### Step 1: Configure HTTPS


```bash
# Force HTTPS redirect in Nginx
sudo cat > /etc/nginx/sites-available/advanciapayledger << EOF
server {
    listen 80;
    server_name api.advanciapayledger.com;
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name api.advanciapayledger.com;
    
    ssl_certificate /etc/letsencrypt/live/api.advanciapayledger.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/api.advanciapayledger.com/privkey.pem;
    
    location / {
        proxy_pass http://localhost:3001;
        proxy_ssl_verify off;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
EOF

sudo nginx -t && sudo systemctl restart nginx
```


### Step 2: Set Security Headers


```bash
# Add to Nginx config
add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
add_header X-Content-Type-Options "nosniff" always;
add_header X-Frame-Options "DENY" always;
add_header X-XSS-Protection "1; mode=block" always;
```


### Step 3: Configure Firewall


```bash
# Enable UFW firewall
sudo ufw enable

# Allow SSH
sudo ufw allow 22/tcp

# Allow HTTP
sudo ufw allow 80/tcp

# Allow HTTPS
sudo ufw allow 443/tcp

# Verify rules
sudo ufw status
```


---

## ðŸ“Š Part 5: Monitoring and Logging


### Step 1: Setup Application Logging


```bash
# Create logs directory
mkdir -p /var/log/advancia
chmod 755 /var/log/advancia

# Configure PM2 logging
pm2 start dist/index.js --name "advancia-api" --output /var/log/advancia/out.log --error /var/log/advancia/error.log
```


### Step 2: Monitor with PM2


```bash
# View logs
pm2 logs advancia-api

# Monitor resources
pm2 monit

# View metrics
pm2 show advancia-api
```


### Step 3: Setup Uptime Monitoring


Use a service like:


- Uptime Robot (free)
- StatusCake
- New Relic
- DataDog


```bash
# Example: Monitor health endpoint every 5 minutes
# Configure through monitoring service dashboard
# Health check: https://api.advanciapayledger.com/api/health
```


---


## âœ… Deployment Verification Checklist


### Frontend (Vercel)

- [ ] Frontend accessible at advanciapayledger.com
- [ ] HTTPS working
- [ ] Environment variables loaded
- [ ] Build successful
- [ ] No console errors
- [ ] Performance acceptable


### Backend (DigitalOcean)

- [ ] Backend accessible at api.advanciapayledger.com
- [ ] HTTPS working
- [ ] Database connected
- [ ] API endpoints responding
- [ ] Health checks passing
- [ ] Error logging working


### Integration

- [ ] Frontend connects to backend
- [ ] API calls completing
- [ ] CORS configured
- [ ] Authentication working
- [ ] Data displaying correctly
- [ ] Real-time features working


### Security

- [ ] SSL certificates valid
- [ ] Firewall configured
- [ ] Secrets secured
- [ ] Rate limiting active
- [ ] CORS restricted
- [ ] Input validation working


### Performance

- [ ] Frontend loads < 3s
- [ ] API responds < 1s
- [ ] Database queries < 500ms
- [ ] WebSocket connected
- [ ] No memory leaks
- [ ] CPU usage normal

---


## ðŸš€ Post-Deployment Tasks


### Week 1

- [ ] Monitor error logs daily
- [ ] Check uptime metrics
- [ ] Test all features
- [ ] Verify user feedback
- [ ] Monitor performance
- [ ] Review security logs


### Month 1

- [ ] Performance optimization
- [ ] Feature refinement
- [ ] User feedback implementation
- [ ] Security audit
- [ ] Backup verification
- [ ] Disaster recovery testing


### Ongoing

- [ ] Security patches
- [ ] Dependency updates
- [ ] Performance monitoring
- [ ] User support
- [ ] Feature development
- [ ] Documentation updates

---
## ðŸ†˜ Troubleshooting
### Frontend Issues


**Problem:** Vercel deployment fails


```bash
# Solution:
# 1. Check build logs in Vercel dashboard
# 2. Verify environment variables
# 3. Clear cache and redeploy
# 4. Check for TypeScript errors
```


**Problem:** API calls failing


```bash
# Solution:
# 1. Verify NEXT_PUBLIC_API_URL correct
# 2. Check CORS configuration
# 3. Test API directly
# 4. Check network tab in DevTools
```


### Backend Issues


**Problem:** Database connection failing


```bash
# Solution:
sudo -u postgres psql -U advancia_user -d advancia_payledger -c "SELECT version();"
```


**Problem:** Application won't start


```bash
# Solution:
pm2 logs advancia-api
# Check error messages and fix issues
```


**Problem:** Port already in use


```bash
# Solution:
sudo lsof -i :3001
sudo kill -9 <PID>
pm2 restart advancia-api
```


---


## ðŸ“ž Support Resources

| Issue | Resource |
| --- | --- |
| Vercel Issues | `https://vercel.com/support` |
| DigitalOcean Help | `https://www.digitalocean.com/docs` |
| Node.js Guide | `https://nodejs.org/en/docs` |
| Next.js Docs | `https://nextjs.org/docs` |
| PostgreSQL Help | `https://www.postgresql.org/docs` |

---


## âœ… Deployment Sign-Off

**Deployment Date:** _________________  
**Deployed By:** _________________  
**Verified By:** _________________  

**Production Status:** ðŸŸ¢ LIVE

**All systems operational and ready for user traffic!** ðŸŽ‰

